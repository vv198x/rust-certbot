# Simple Rust Certbot Configuration
# =================================

# Certificate renewal dates (per domain)
# Fill real ISO dates per domain (YYYY-MM-DD)
map $host $cert_renewal_date {
    default "-";
    your-domain.com "YYYY-MM-DD";
    example.com "YYYY-MM-DD";
}

# Basic server configuration
server {
    listen 80;
    listen 443 ssl http2;
    server_name your-domain.com;    
    add_header X-Cert-Renewal $cert_renewal_date always;
    
    # ACME Challenge for Let's Encrypt
    location /.well-known/acme-challenge/ {
        root ./web/letsencrypt/;
        try_files $uri =404;
    }
    
    # Proxy to your application
    location /service {
        proxy_pass http://localhost:3000;
    }

    location / {
        root ./web;
        try_files $uri =404;
    }    
    
}
