# Rust Certbot

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Certbot –Ω–∞ —è–∑—ã–∫–µ Rust –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ —Å –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –ø–∞–º—è—Ç–∏.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîê –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ** SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á** –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤** —á–µ—Ä–µ–∑ HTTP-01 –∏ DNS-01 challenges

### üåê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ACME-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **Let's Encrypt** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- **ZeroSSL** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π ACME-–ø—Ä–æ–≤–∞–π–¥–µ—Ä
- **–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ ACME-—Å–µ—Ä–≤–µ—Ä—ã** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- **Staging/Production –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚ö° –í–µ–±-—Å–µ—Ä–≤–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ Rust/Actix
- **–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä** –Ω–∞ –±–∞–∑–µ Actix-web
- **HTTP challenge handler** –¥–ª—è ACME-–≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **Webhook –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üîÑ –ü—Ä–æ–∫—Å–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- **Reverse proxy** –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞
- **Load balancing** –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- **SSL termination** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **Health checks** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- **Graceful reload** –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **–ü–∞–º—è—Ç—å –±–µ–∑ GC** - –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **Zero-cost abstractions** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
- **Thread safety** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
- **Cross-platform** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Linux, Windows, macOS
- **Single binary** - –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/vv198x/rust-certbot.git
cd rust-certbot

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
cargo build --release

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
cargo install --path .
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
rust-certbot init

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –¥–æ–º–µ–Ω–∞
rust-certbot cert --domain example.com

# –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
rust-certbot serve --config config.toml
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```toml
[server]
port = 8080
host = "0.0.0.0"

[acme]
provider = "lets-encrypt"
email = "admin@example.com"
staging = false

[domains]
example.com = { 
    webroot = "/var/www/html",
    proxy = "http://localhost:3000"
}

[proxy]
enabled = true
upstream = "http://localhost:3000"
ssl_termination = true
```

## üåê Nginx‚Äë–ø–æ–¥–æ–±–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –∏ —à–∞–≥–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–∏–º–µ—Ä Nginx‚Äë–ø–æ–¥–æ–±–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ `config/simple.conf`. –û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É Nginx.

### –®–∞–≥–∏
- **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥–∏**:
```bash
mkdir -p ./web/letsencrypt ./cert/<domain>
```
- **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** –≤ `config/simple.conf` —á–µ—Ä–µ–∑ `map` (–æ–¥–Ω–∞ –¥–∞—Ç–∞ –Ω–∞ –¥–æ–º–µ–Ω):
```nginx
map $host $cert_renewal_date {
    default "-";
    your-domain.com "2025-01-31";
    example.com "2025-02-15";
}
```
- **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –∫ Nginx**: –¥–æ–±–∞–≤—å—Ç–µ include –≤–Ω—É—Ç—Ä–∏ `http {}`, —á—Ç–æ–±—ã –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ `map` –±—ã–ª–∞ –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (–≤ —Ñ–∞–π–ª–µ —Ç–∞–∫–∂–µ –µ—Å—Ç—å `server {}`):
```nginx
http {
    include /absolute/path/to/rust-certbot/config/simple.conf;
}
```
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥**:
```bash
nginx -t && nginx -s reload
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTTP‚Äë01 challenge: `location /.well-known/acme-challenge/ { root ./web/letsencrypt; }`
- –û—Ç–¥–∞—ë—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –¥–∞—Ç–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: `add_header X-Cert-Renewal $cert_renewal_date always;`
- –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å –ø–æ –ø—É—Ç–∏ `/service` ‚Üí `http://localhost:3000`
- –û—Ç–¥–∞—ë—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ `./web`

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- **–ü—É—Ç–∏**: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç–∏ –≤ `config/simple.conf` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `./web`) —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã —Å —Ç–µ–º, –∫–∞–∫ –≤—ã –º–æ–Ω—Ç–∏—Ä—É–µ—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ/–Ω–∞ —Ö–æ—Å—Ç–µ. –í `config.toml` –∫–∞—Ç–∞–ª–æ–≥ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∑–∞–¥–∞–Ω –∫–∞–∫ `/etc/rust-certbot/certs` ‚Äî –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–≤–µ–¥–∏—Ç–µ –∫ –æ–¥–Ω–æ–º—É –ø—É—Ç–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bind‚Äëmount.
- **–î—É–±–ª–∏ –¥–æ–º–µ–Ω–æ–≤**: –≤—Å–µ –¥–æ–º–µ–Ω—ã –∏–∑ `server_name` –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∑–∞–ø–∏—Å—å –≤ `map`.
- –ï—Å–ª–∏ –≤—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Nginx, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ `config/simple.conf` –∫–∞–∫ –æ–±—Ä–∞–∑–µ—Ü ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ—Ä—ë—Ç—Å—è –∏–∑ `config.toml`.

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
cargo test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
cargo clippy

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
cargo fmt

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
cargo doc --open
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

MIT License - –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã—Ö –ª–∏—Ü–µ–Ω–∑–∏–π —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è:
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é
- –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ
- –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- –ë–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–π

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Pull Request –∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ Issues.

### –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥:
1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –¢–µ–∫—É—â–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:

- [ ] ACME-–∫–ª–∏–µ–Ω—Ç
- [ ] –í–µ–±-—Å–µ—Ä–≤–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è 
- [ ] –ü—Ä–æ–∫—Å–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –¢–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è


## üîó –°—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.rs/rust-certbot)
- [Issues](https://github.com/vv198x/rust-certbot/issues)
- [Discussions](https://github.com/vv198x/rust-certbot/discussions)